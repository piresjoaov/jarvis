<!-- Layout wrapper -->
<div
  class="flex h-screen w-screen bg-gray-950 text-white font-sans relative overflow-hidden"
>
  <!-- Sidebar -->
  <aside
    class="h-full w-64 bg-gray-900 border-r border-gray-800 z-40 flex-col transition-all duration-300"
    [ngClass]="{
      'fixed top-0 left-0': isMobile,
      'relative flex': !isMobile,
      hidden: !isSidebarOpen && isMobile
    }"
  >
    <!-- Sidebar content -->
    <app-sidebar (closeSidebar)="toggleSidebar()" class="..."></app-sidebar>

    <!-- Collapse button (desktop only) -->
    <button
      *ngIf="!isMobile"
      class="mt-auto m-4 p-2 text-xs rounded bg-gray-800 hover:bg-gray-700 transition"
      (click)="toggleSidebar()"
    >
      â¬… Hide Sidebar
    </button>
  </aside>

  <!-- Backdrop for mobile -->
  <div
    *ngIf="isMobile && isSidebarOpen"
    class="fixed inset-0 bg-black bg-opacity-40 z-30"
    (click)="toggleSidebar()"
  ></div>

  <!-- Main Content Area -->
  <main class="flex-1 flex flex-col h-full overflow-hidden">

    <!-- Main panel content -->
    <div class="flex flex-1 overflow-hidden">
      <!-- Left Panel -->
      <section
        class="flex flex-col transition-all duration-300"
        [ngClass]="{
          'flex-1': !activeTab,
          'w-1/2 border-r border-gray-700': activeTab
        }"
      >
        <app-chat-window *ngIf="activeLeftPanel === 'chat'"></app-chat-window>
        <app-file-conversion
          *ngIf="activeLeftPanel === 'file-conversion'"
        ></app-file-conversion>
        <app-study-scheduler
          *ngIf="activeLeftPanel === 'study-scheduler-form'"
        ></app-study-scheduler>
      </section>

      <!-- Right Panel -->
      <section *ngIf="activeTab" class="flex-1 flex flex-col bg-gray-900">
        <app-terminal *ngIf="activeTab === 'terminal'"></app-terminal>
        <app-file-viewer *ngIf="activeTab === 'file-viewer'"></app-file-viewer>
        <app-study-scheduler
          *ngIf="activeTab === 'study-scheduler'"
        ></app-study-scheduler>
      </section>
    </div>
  </main>
</div>
